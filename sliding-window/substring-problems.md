# å­ä¸²é—®é¢˜

## å¼‚ä½å­ä¸²

å¼‚ä½å­ä¸²çš„å®šä¹‰æ˜¯å­—ç¬¦ä¸²ä¸­å­—ç¬¦çš„ç»„åˆé¡ºåºå¯ä»¥ä¸åŒï¼Œä½†å­—ç¬¦çš„ç§ç±»å’Œä¸ªæ•°å¿…é¡»ç›¸åŒã€‚

### [567. å­—ç¬¦ä¸²çš„æ’åˆ— ğŸŸ¡ â¤](https://leetcode.cn/problems/permutation-in-string/description/)

é¢˜ç›®è¦æ±‚ï¼šç»™å®šä¸¤ä¸ª**ä»…åŒ…å«å°å†™å­—æ¯**çš„å­—ç¬¦ä¸² `s1` å’Œ `s2`ã€‚åˆ¤æ–­å­—ç¬¦ä¸² `s2` æ˜¯å¦åŒ…å« `s1` çš„æ’åˆ—ä¹‹ä¸€ï¼Œæˆ–è€…è¯´ `s1` æ˜¯å¦æ˜¯ `s2` çš„å¼‚ä½å­ä¸²ã€‚

#### 1. æ’åºæ¯”è¾ƒï¼ˆè¶…æ—¶ï¼‰

å…ˆå¯¹ `s1` è¿›è¡Œæ’åºï¼Œç„¶åéå† `s2`ï¼Œä¾æ¬¡å¯¹é•¿åº¦ä¸º `m` çš„å­ä¸²è¿›è¡Œæ’åºï¼Œåˆ¤æ–­æ’åºåçš„å­ä¸²ä¸æ’åºåçš„ `s1` æ˜¯å¦ç›¸åŒã€‚

``` js
var checkInclusion = function (s1, s2) {
  const m = s1.length;
  const n = s2.length;
  if (m > n) return false;

  const s1Sorted = s1.split('').sort().join('');

  for (let i = 0; i <= n - m; i++) {
    const s2SubSorted = s2.slice(i, i + m).split('').sort().join('');
    if (s1Sorted === s2SubSorted) return true;
  }

  return false;
};
```

æ—¶é—´å¤æ‚åº¦ï¼šO(n * mlogm)ï¼Œç©ºé—´å¤æ‚åº¦ï¼šO(m)ã€‚

#### 2. æ»‘åŠ¨çª—å£ + æ•°ç»„è®¡æ•° ğŸ‘

ç»´æŠ¤ä¸€ä¸ªå›ºå®šå¤§å°çš„æ»‘åŠ¨çª—å£ï¼Œæ¯æ¬¡çª—å£å‘å³æ»‘åŠ¨ä¸€ä½ï¼Œåˆ¤æ–­å½“å‰çª—å£ä¸ `s1` ä¸­æ¯ä¸ªå­—ç¬¦å‡ºç°çš„æ¬¡æ•°æ˜¯å¦ç›¸åŒã€‚

ç”±äºä¸¤ä¸ªå­—ç¬¦ä¸²ä¸­ä»…åŒ…å«å°å†™å­—æ¯ï¼Œæ‰€ä»¥åˆ†åˆ«ä½¿ç”¨ä¸¤ä¸ªæ•°ç»„è®°å½• `s1` å’Œ `s2` å½“å‰çª—å£å†…æ¯ä¸ªå­—ç¬¦å‡ºç°çš„æ¬¡æ•°ã€‚éå† `s2`ï¼Œåˆ¤æ–­å½“å‰çª—å£ä¸ `s1` ä¸­æ¯ä¸ªå­—ç¬¦å‡ºç°æ¬¡æ•°æ˜¯å¦ç›¸åŒã€‚å¦‚æœç›¸åŒï¼Œè¯´æ˜ `s1` æ˜¯ `s2` çš„å¼‚ä½å­ä¸²ï¼Œè¿”å› `true`ï¼›å¦åˆ™å°†çª—å£å‘å³æ»‘åŠ¨ä¸€ä½ï¼Œç»§ç»­è¿›è¡Œæ¯”è¾ƒï¼Œç›´åˆ°æ‰¾åˆ°å¼‚ä½å­ä¸²æˆ–è€…æ»‘åŠ¨åˆ° `s2` çš„æœ«å°¾ä¸ºæ­¢ã€‚

``` js
var checkInclusion = function (s1, s2) {
  const m = s1.length;
  const n = s2.length;
  if (m > n) return false;

  const s1Count = new Array(26).fill(0);
  const s2Count = new Array(26).fill(0);
  // ç»Ÿè®¡ s1 å’Œ s2 å½“å‰çª—å£å­—ç¬¦å‡ºç°çš„æ¬¡æ•°
  for (let i = 0; i < m; i++) {
    s1Count[s1.charCodeAt(i) - 'a'.charCodeAt()]++;
    s2Count[s2.charCodeAt(i) - 'a'.charCodeAt()]++;
  }

  for (let i = 0; i < n - m; i++) {
    if (isEqual(s1Count, s2Count)) return true;

    // ç§»åŠ¨çª—å£å·¦è¾¹ç•Œ
    s2Count[s2.charCodeAt(i) - 'a'.charCodeAt()]--;
    // ç§»åŠ¨çª—å£å³è¾¹ç•Œ
    s2Count[s2.charCodeAt(i + m) - 'a'.charCodeAt()]++;
  }

  // åˆ¤æ–­æœ€åä¸€ä¸ªçª—å£ä¸ s1 ä¸­çš„å­—ç¬¦å‡ºç°çš„æ¬¡æ•°æ˜¯å¦ç›¸ç­‰
  return isEqual(s1Count, s2Count);
};

const isEqual = (arr1, arr2) => {
  for (let i = 0; i < 26; i++) {
    if (arr1[i] !== arr2[i]) return false;
  }
  return true;
};
```

æ—¶é—´å¤æ‚åº¦ï¼šO(m + n)ï¼Œæ—¶é—´å¤æ‚åº¦ï¼šO(|Î£|)ï¼Œ|Î£| ä¸ºå­—ç¬¦é›†çš„å¤§å°ã€‚

#### 3. æ»‘åŠ¨çª—å£ + å“ˆå¸Œè¡¨è®¡æ•° ğŸ‘

ç»´æŠ¤ä¸€ä¸ªå¯å˜å¤§å°çš„æ»‘åŠ¨çª—å£ï¼Œä½¿ç”¨ä¸¤ä¸ªå˜é‡ `l` å’Œ `r` åˆ†åˆ«è¡¨ç¤ºæ»‘åŠ¨çª—å£çš„å·¦å³è¾¹ç•Œï¼Œçª—å£å†…åªèƒ½åŒ…å« `s1` ä¸­çš„å­—ç¬¦ã€‚ä½¿ç”¨ä¸€ä¸ªå“ˆå¸Œè¡¨æ¥è®°å½• `s1` ä¸­æ¯ä¸ªå­—ç¬¦å‡ºç°çš„æ¬¡æ•°ã€‚

éå† `s2`ï¼Œæ¯æ¬¡å‘å³ç§»åŠ¨å³è¾¹ç•Œæ‰©å¤§çª—å£ï¼Œå°†å½“å‰å­—ç¬¦æ·»åŠ åˆ°çª—å£ä¸­ï¼Œå¦‚æœå½“å‰çª—å£çš„å­—ç¬¦ä¸ `s1` æŸä¸ªæ’åˆ—ä¸åŒ¹é…ï¼Œåˆ™å‘å³ç§»åŠ¨å·¦è¾¹ç•Œæ”¶ç¼©çª—å£ã€‚å¦‚æœå½“å‰çª—å£çš„é•¿åº¦ç­‰äº `m`ï¼Œè¯´æ˜å½“æˆçª—å£ä¸­çš„å­—ç¬¦ä¸²æ˜¯ `s1` çš„å¼‚ä½å­ä¸²ï¼Œåˆ™è¿”å› `true`ã€‚

``` js
var checkInclusion = function (s1, s2) {
  const m = s1.length;
  const n = s2.length;
  if (m > n) return false;

  const map = new Map();
  for (const c of s1) {
    map.set(c, (map.get(c) ?? 0) + 1);
  }

  let l = 0;
  let r = 0;
  while (r < n) {
    // æ‰©å¤§çª—å£
    map.set(s2[r], (map.get(s2[r]) ?? 0) - 1);

    // å½“å‰çª—å£çš„å­—ç¬¦ä¸ s1 æŸä¸ªæ’åˆ—ä¸åŒ¹é…ï¼Œå‘å³ç§»åŠ¨çª—å£å·¦è¾¹ç•Œæ”¶ç¼©çª—å£
    while (map.get(s2[r]) < 0) {
      map.set(s2[l], map.get(s2[l]) + 1);
      l++;
    }

    // æ‰¾åˆ°å¼‚ä½å­ä¸²
    if (r - l + 1 === m) return true;

    r++;
  }

  return false;
};
```

æ—¶é—´å¤æ‚åº¦ï¼šO(m + n)ï¼Œæ—¶é—´å¤æ‚åº¦ï¼šO(|Î£|)ï¼Œ|Î£| ä¸ºå­—ç¬¦é›†çš„å¤§å°ã€‚

**ä½¿ç”¨æ•°ç»„è®¡æ•°è®¿é—®æ•ˆç‡æ›´é«˜ï¼Œè€Œä½¿ç”¨å“ˆå¸Œè¡¨è®¡æ•°çš„æ–¹æ³•æ›´åŠ é€šç”¨ï¼Œå¯ä»¥å¤„ç†æ›´å¤šå­—ç¬¦ã€‚**

### [438. æ‰¾åˆ°å­—ç¬¦ä¸²ä¸­æ‰€æœ‰å­—æ¯å¼‚ä½è¯ ğŸŸ¡ â¤](https://leetcode.cn/problems/find-all-anagrams-in-a-string/description/)

é¢˜ç›®è¦æ±‚ï¼šç»™å®šä¸¤ä¸ª**ä»…åŒ…å«å°å†™å­—æ¯**çš„å­—ç¬¦ä¸² `s` å’Œ `p`ã€‚æ‰¾å‡º `s` ä¸­æ‰€æœ‰ `p` çš„å¼‚ä½å­ä¸²ï¼Œè¿”å›è¿™äº›å­ä¸²çš„èµ·å§‹ç´¢å¼•ã€‚

#### 1. æ’åºæ¯”è¾ƒï¼ˆè¶…æ—¶ï¼‰

ä¸ä¸Šä¸€é¢˜çš„æ€è·¯ç›¸åŒï¼Œåªä¸è¿‡è¿™é‡Œè¦æ±‚è¿”å›çš„æ˜¯æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„å­ä¸²å…¶å®ç´¢å¼•ã€‚

``` js
var findAnagrams = function (s, p) {
  const m = s.length;
  const n = p.length;
  if (m < p) return [];

  const res = [];
  const pSorted = p.split('').sort().join('');

  for (let i = 0; i <= m - n; i++) {
    const sSubSorted = s.slice(i, i + n).split('').sort().join('');
    if (sSubSorted === pSorted) res.push(i);
  }

  return res;
};
```

æ—¶é—´å¤æ‚åº¦ï¼šO(n * mlogm)ï¼Œç©ºé—´å¤æ‚åº¦ï¼šO(m)ã€‚

#### 2. æ»‘åŠ¨çª—å£ + æ•°ç»„è®¡æ•° ğŸ‘

æ€è·¯ä¸ä¸Šä¸€é¢˜ç›¸åŒï¼Œè¿™é‡Œä¸åœ¨èµ˜è¿°ã€‚

``` js
var findAnagrams = function (s, p) {
  const m = s.length;
  const n = p.length;
  if (m < p) return [];

  const sCount = new Array(26).fill(0);
  const pCount = new Array(26).fill(0);
  const res = [];

  for (let i = 0; i < n; i++) {
    sCount[s.charCodeAt(i) - 'a'.charCodeAt()]++;
    pCount[p.charCodeAt(i) - 'a'.charCodeAt()]++;
  }

  for (let i = 0; i < m - n; i++) {
    if (isEqual(sCount, pCount)) res.push(i);

    // ç§»åŠ¨çª—å£å·¦è¾¹ç•Œ
    sCount[s.charCodeAt(i) - 'a'.charCodeAt()]--;
    // ç§»åŠ¨çª—å£å³è¾¹ç•Œ
    sCount[s.charCodeAt(i + n) - 'a'.charCodeAt()]++;
  }
  
  // åˆ¤æ–­æœ€åä¸€ä¸ªçª—å£ä¸ p ä¸­çš„å­—ç¬¦å‡ºç°çš„æ¬¡æ•°æ˜¯å¦ç›¸ç­‰
  if (isEqual(sCount, pCount)) res.push(m - n);

  return res;
};

const isEqual = (arr1, arr2) => {
  for (let i = 0; i < 26; i++) {
    if (arr1[i] !== arr2[i]) return false;
  }
  return true;
};
```

æ—¶é—´å¤æ‚åº¦ï¼šO(m + n)ï¼Œæ—¶é—´å¤æ‚åº¦ï¼šO(|Î£|)ï¼Œ|Î£| ä¸ºå­—ç¬¦é›†çš„å¤§å°ã€‚

#### 3. æ»‘åŠ¨çª—å£ + å“ˆå¸Œè¡¨è®¡æ•° ğŸ‘

æ€è·¯ä¸ä¸Šä¸€é¢˜ç›¸åŒï¼Œè¿™é‡Œä¸åœ¨èµ˜è¿°ã€‚

``` js
var findAnagrams = function (s, p) {
  const m = s.length;
  const n = p.length;
  if (m < p) return [];

  const map = new Map();
  for (const c of p) {
    map.set(c, (map.get(c) ?? 0) + 1);
  }

  let l = 0;
  let r = 0;
  const res = [];

  while (r < m) {
    // æ‰©å¤§çª—å£
    map.set(s[r], (map.get(s[r]) ?? 0) - 1);

    // å½“å‰çª—å£çš„å­—ç¬¦ä¸ p æŸä¸ªæ’åˆ—ä¸åŒ¹é…ï¼Œå‘å³ç§»åŠ¨çª—å£å·¦è¾¹ç•Œæ”¶ç¼©çª—å£
    while (map.get(s[r]) < 0) {
      map.set(s[l], map.get(s[l]) + 1);
      l++;
    }

    // æ‰¾åˆ°å¼‚ä½å­ä¸²
    if (r - l + 1 === n) res.push(l);

    r++;
  }

  return res;
};
```

æ—¶é—´å¤æ‚åº¦ï¼šO(m + n)ï¼Œæ—¶é—´å¤æ‚åº¦ï¼šO(|Î£|)ï¼Œ|Î£| ä¸ºå­—ç¬¦é›†çš„å¤§å°ã€‚

## æœ€çŸ­å­ä¸²

### [76. æœ€å°è¦†ç›–å­ä¸² ğŸ”´ â¤](https://leetcode.cn/problems/minimum-window-substring/description/)

é¢˜ç›®è¦æ±‚ï¼šç»™å®šä¸¤ä¸ª**ä»…åŒ…å«è‹±æ–‡å­—æ¯**çš„å­—ç¬¦ä¸² `s` å’Œ `t`ã€‚æ‰¾å‡º `s` ä¸­åŒ…å« `t` ä¸­æ‰€æœ‰å­—ç¬¦çš„æœ€å°å­ä¸²ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™è¿”å›ç©ºå­—ç¬¦ä¸²ã€‚

#### 1. æ»‘åŠ¨çª—å£ + æ•°ç»„è®¡æ•° ğŸ‘

ç»´æŠ¤ä¸€ä¸ªå¯å˜å¤§å°çš„æ»‘åŠ¨çª—å£ï¼Œä½¿ç”¨ä¸¤ä¸ªå˜é‡ `l` å’Œ `r` åˆ†åˆ«è¡¨ç¤ºæ»‘åŠ¨çª—å£çš„å·¦å³è¾¹ç•Œã€‚ç”±äºä¸¤ä¸ªå­—ç¬¦ä¸²ä¸­ä»…åŒ…å«è‹±æ–‡å­—æ¯ï¼Œæ‰€ä»¥ä½¿ç”¨ä¸¤ä¸ªæ•°ç»„åˆ†åˆ«è®°å½• `s` å’Œ `t` å½“å‰çª—å£ä¸­æ¯ä¸ªå­—ç¬¦å‡ºç°çš„æ¬¡æ•°ã€‚é€šè¿‡ä¸æ–­è°ƒæ•´çª—å£å¤§å°æ¥å¯»æ‰¾æœ€å°è¦†ç›–å­ä¸²ã€‚

å®šä¹‰å˜é‡ `count` ç»Ÿè®¡çª—å£å†…åŒ…å«å¤šå°‘ä¸ª `t` ä¸­çš„å­—ç¬¦ï¼Œå˜é‡ `minLeft` è¡¨ç¤ºæœ€å°è¦†ç›–å­ä¸²çš„èµ·å§‹ç´¢å¼•ï¼Œå˜é‡ `minLen` è¡¨ç¤ºæœ€å°è¦†ç›–å­ä¸²çš„é•¿åº¦ã€‚

éå† `s`ï¼Œæ¯æ¬¡å‘å³ç§»åŠ¨å³è¾¹ç•Œæ‰©å¤§çª—å£ï¼Œå°†å½“å‰å­—ç¬¦æ·»åŠ åˆ°çª—å£ä¸­ã€‚å¦‚æœå½“å‰å­—ç¬¦åœ¨ `t` ä¸­å‡ºç°ï¼Œåˆ™å°† `count` åŠ ä¸€ã€‚å¦‚æœçª—å£å†…åŒ…å« `t` ä¸­çš„æ‰€æœ‰å­—ç¬¦ï¼Œéœ€è¦å‘å³ç§»åŠ¨å·¦è¾¹ç•Œæ”¶ç¼©çª—å£ï¼Œå¹¶å°è¯•æ‰¾å‡ºæœ€å°è¦†ç›–å­ä¸²ã€‚

``` js
var minWindow = function (s, t) {
  const m = s.length;
  const n = t.length;
  if (m < n) return '';
  
  let l = 0;
  let r = 0;
  let count = 0;
  let minLeft = 0;
  let minLen = Infinity;

  const sCount = new Array(128).fill(0);
  const tCount = new Array(128).fill(0);
  for (let i = 0; i < n; i++) {
    tCount[t.charCodeAt(i)]++;
  }

  while (r < m) {
    // æ‰©å¤§çª—å£
    sCount[s.charCodeAt(r)]++;
    // å½“å‰å­—ç¬¦åœ¨ t ä¸­å‡ºç°
    if (tCount[s.charCodeAt(r)] >= sCount[s.charCodeAt(r)]) count++;

    // æ»¡è¶³æ¡ä»¶ï¼Œå°è¯•æ”¶ç¼©çª—å£æ‰¾å‡ºæœ€å°è¦†ç›–å­ä¸²
    while (count === n) {
      if (r - l + 1 < minLen) {
        minLen = r - l + 1;
        minLeft = l;
      }

      if (tCount[s.charCodeAt(l)] >= sCount[s.charCodeAt(l)]) count--;
      sCount[s.charCodeAt(l)]--;
      l++;
    }

    r++;
  }

  return minLen === Infinity ? '' : s.slice(minLeft, minLeft + minLen);
};

```

æ—¶é—´å¤æ‚åº¦ï¼šO(m + n)ï¼Œç©ºé—´å¤æ‚åº¦ï¼šO(|Î£|)ï¼Œ|Î£| ä¸ºå­—ç¬¦é›†çš„å¤§å°ã€‚

#### 2. æ»‘åŠ¨çª—å£ + å“ˆå¸Œè¡¨è®¡æ•° ğŸ‘

ä¸ä¸Šä¸€é¢˜è§£æ€è·¯ç›¸åŒï¼Œåªä¸è¿‡è¿™é‡Œåªä½¿ç”¨ä¸€ä¸ªå“ˆå¸Œè¡¨è®°å½• `t` ä¸­æ¯ä¸ªå­—ç¬¦å‡ºç°çš„æ¬¡æ•°ã€‚éå† `s`ï¼Œæ¯æ¬¡å‘å³ç§»åŠ¨å³è¾¹ç•Œæ‰©å¤§çª—å£ï¼Œå°†å½“å‰å­—ç¬¦æ·»åŠ åˆ°çª—å£ä¸­ã€‚å¦‚æœå½“å‰å­—ç¬¦åœ¨ `t` ä¸­å‡ºç°ï¼Œåˆ™å°† `count` åŠ ä¸€ã€‚å¦‚æœçª—å£å†…åŒ…å« `t` ä¸­çš„æ‰€æœ‰å­—ç¬¦ï¼Œéœ€è¦å‘å³ç§»åŠ¨å·¦è¾¹ç•Œæ”¶ç¼©çª—å£ï¼Œå¹¶å°è¯•æ‰¾å‡ºæœ€å°è¦†ç›–å­ä¸²ã€‚

``` js
var minWindow = function (s, t) {
  const m = s.length;
  const n = t.length;
  if (m < n) return '';
  
  let l = 0;
  let r = 0;
  let count = 0;
  let minLeft = 0;
  let minLen = Infinity;

  const map = new Map();
  for (const c of t) {
    map.set(c, (map.get(c) ?? 0) + 1);
  }

  while (r < m) {
    // æ‰©å¤§çª—å£
    map.set(s[r], (map.get(s[r]) ?? 0) - 1);
    // å½“å‰å­—ç¬¦åœ¨ t ä¸­å‡ºç°
    if (map.get(s[r]) >= 0) count++;

    // æ»¡è¶³æ¡ä»¶ï¼Œå°è¯•æ”¶ç¼©çª—å£æ‰¾å‡ºæœ€å°è¦†ç›–å­ä¸²
    while (count === n) {
      if (r - l + 1 < minLen) {
        minLen = r - l + 1;
        minLeft = l;
      }

      map.set(s[l], map.get(s[l]) + 1);
      if (map.get(s[l]) > 0) count--;
      l++;
    }

    r++;
  }

  return minLen === Infinity ? '' : s.slice(minLeft, minLeft + minLen);
};
```

æ—¶é—´å¤æ‚åº¦ï¼šO(m + n)ï¼Œç©ºé—´å¤æ‚åº¦ï¼šO(m)ã€‚

## æœ€é•¿å­ä¸²

### [159. è‡³å¤šåŒ…å«ä¸¤ä¸ªä¸åŒå­—ç¬¦çš„æœ€é•¿å­ä¸² ğŸŸ¡ ğŸ”’](https://leetcode.cn/problems/longest-substring-with-at-most-two-distinct-characters/description/)

é¢˜ç›®è¦æ±‚ï¼šåœ¨ä¸€ä¸ª**ä»…åŒ…å«è‹±æ–‡å­—æ¯**çš„å­—ç¬¦ä¸² `s` ä¸­æ‰¾å‡ºæœ€å¤šåŒ…å«ä¸¤ä¸ªä¸åŒå­—ç¬¦çš„æœ€é•¿å­ä¸²çš„é•¿åº¦ã€‚

#### 1. æš´åŠ›æ³•

åŒå±‚å¾ªç¯æšä¸¾æ‰€æœ‰å­ä¸²ï¼Œç»Ÿè®¡æ¯ä¸ªå­ä¸²ä¸­ä¸åŒå­—ç¬¦çš„æ•°é‡ï¼Œåˆ¤æ–­å­ä¸²æ˜¯å¦è‡³å°‘åŒ…å«ä¸¤ä¸ªä¸åŒå­—ç¬¦ï¼Œè®°å½•æœ€å¤šåŒ…å«ä¸¤ä¸ªä¸åŒå­—ç¬¦çš„æœ€é•¿å­ä¸²çš„é•¿åº¦ã€‚

``` js
var lengthOfLongestSubstringTwoDistinct = function (s) {
  const n = s.length;
  let res = 0;

  for (let i = 0; i < n; i++) {
    const seen = new Set();
    for (let j = i; j < n; j++) {
      seen.add(s[j]);

      if (seen.size > 2) break;

      res = Math.max(res, j - i + 1);
    }
  }
}
```

æ—¶é—´å¤æ‚åº¦ï¼šO(nÂ²)ï¼Œç©ºé—´å¤æ‚åº¦ï¼šO(|Î£|)ï¼Œ|Î£| ä¸ºå­—ç¬¦é›†çš„å¤§å°ã€‚

#### 2. æ»‘åŠ¨çª—å£ + å“ˆå¸Œè¡¨ ğŸ‘

ç»´æŠ¤ä¸€ä¸ªå¯å˜å¤§å°çš„æ»‘åŠ¨çª—å£ï¼Œä½¿ç”¨ä¸¤ä¸ªå˜é‡ `l` å’Œ `r` åˆ†åˆ«è¡¨ç¤ºæ»‘åŠ¨çª—å£çš„å·¦å³è¾¹ç•Œï¼Œçª—å£ä¸­ä»…åŒ…å«ä¸¤ç§ä¸åŒçš„å­—ç¬¦ã€‚ä½¿ç”¨å“ˆå¸Œè¡¨è®°å½•å½“å‰çª—å£ä¸åŒå­—ç¬¦çš„æ•°é‡ã€‚

éå† `s`ï¼Œæ¯æ¬¡å‘å³ç§»åŠ¨å³è¾¹ç•Œæ‰©å¤§çª—å£ï¼Œå°†å½“å‰å­—ç¬¦æ·»åŠ åˆ°çª—å£ä¸­ï¼Œå¹¶æ›´æ–°å½“å‰å­ä¸²çš„é•¿åº¦ã€‚å¦‚æœå½“å‰çª—å£ä¸­ä¸åŒå­—ç¬¦æ•°é‡è¶…è¿‡ä¸¤ä¸ªï¼Œåˆ™å‘å³ç§»åŠ¨å·¦è¾¹ç•Œæ”¶ç¼©çª—å£ï¼Œç›´åˆ°çª—å£ä¸­åªåŒ…å«ä¸¤ä¸ªä¸åŒå­—ç¬¦ä¸ºæ­¢ã€‚

``` js
var lengthOfLongestSubstringTwoDistinct = function (s) {
  const n = s.length;
  const map = new Map();
  let l = 0;
  let r = 0;
  let res = 0;

  while (r < n) {
    // æ‰©å¤§çª—å£
    map.set(s[r], (map.get(s[r]) ?? 0) + 1);

    // å½“å‰çª—å£ä¸­ä¸åŒå­—ç¬¦æ•°é‡è¶…è¿‡ä¸¤ä¸ªï¼Œåˆ™å‘å³ç§»åŠ¨å·¦è¾¹ç•Œæ”¶ç¼©çª—å£
    while (map.size > 2) {
      map.set(s[l], map.get(s[l]) - 1);
      if (map.get(s[l]) === 0) {
        map.delete(s[l]);
      }
      l++;
    }

    res = Math.max(res, r - l + 1);

    r++;
  }

  return res;
}
```

æ—¶é—´å¤æ‚åº¦ï¼šO(n)ï¼Œç©ºé—´å¤æ‚åº¦ï¼šO(|Î£|)ï¼Œ|Î£| ä¸ºå­—ç¬¦é›†çš„å¤§å°ã€‚

### [340. è‡³å¤šåŒ…å« K ä¸ªä¸åŒå­—ç¬¦çš„æœ€é•¿å­ä¸² ğŸŸ¡ ğŸ”’](https://leetcode.cn/problems/longest-substring-with-at-most-k-distinct-characters/description/)

é¢˜ç›®è¦æ±‚ï¼šåœ¨ç»™å®šå­—ç¬¦ä¸² `s` ä¸­æ‰¾å‡ºæœ€å¤šåŒ…å« `k` ä¸ªä¸åŒå­—ç¬¦çš„æœ€é•¿å­ä¸²çš„é•¿åº¦ã€‚

è§£é¢˜æ€è·¯ä¸ä¸Šä¸€é¢˜ç›¸åŒï¼Œè¿™é‡Œå°±ä¸åœ¨èµ˜è¿°ã€‚

#### 1. æš´åŠ›æ³•

``` js
var lengthOfLongestSubstringKDistinct = function (s, k) {
  const n = s.length;
  let res = 0;

  for (let i = 0; i < n; i++) {
    const seen = new Set();
    for (let j = i; j < n; j++) {
      seen.add(s[j]);

      if (seen.size > k) break;

      res = Math.max(res, j - i + 1);
    }
  }

  return res;
}
```

#### 2. æ»‘åŠ¨çª—å£ + å“ˆå¸Œè¡¨ ğŸ‘

``` js
var lengthOfLongestSubstringKDistinct = function (s, k) {
  const n = s.length;
  const map = new Map();
  let l = 0;
  let r = 0;
  let res = 0;

  while (r < n) {
    // æ‰©å¤§çª—å£
    map.set(s[r], (map.get(s[r]) ?? 0) + 1);

    // å½“å‰çª—å£ä¸­ä¸åŒå­—ç¬¦æ•°é‡è¶…è¿‡ k ä¸ªï¼Œåˆ™å‘å³ç§»åŠ¨å·¦è¾¹ç•Œæ”¶ç¼©çª—å£
    while (map.size > k) {
      map.set(s[l], map.get(s[l]) - 1);
      if (map.get(s[l]) === 0) {
        map.delete(s[l]);
      }
      l++;
    }

    res = Math.max(res, r - l + 1);

    r++;
  }

  return res;
}
```

### [395. è‡³å°‘æœ‰ K ä¸ªé‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸² ğŸŸ¡](https://leetcode.cn/problems/longest-substring-with-at-least-k-repeating-characters/description/)

é¢˜ç›®è¦æ±‚ï¼šåœ¨ä¸€ä¸ª**ä»…åŒ…å«å°å†™å­—æ¯**çš„å­—ç¬¦ä¸² `s` ä¸­æ‰¾å‡ºè‡³å°‘åŒ…å« `k` ä¸ªé‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²çš„é•¿åº¦ã€‚

#### 1. æš´åŠ›æ³•

åŒå±‚å¾ªç¯æšä¸¾æ‰€æœ‰å­ä¸²ï¼Œç»Ÿè®¡æ¯ä¸ªå­ä¸²ä¸­æ¯ä¸ªå­—ç¬¦å‡ºç°çš„æ¬¡æ•°ï¼Œåˆ¤æ–­å­ä¸²ä¸­çš„æ¯ä¸ªå­—ç¬¦å‡ºç°çš„æ¬¡æ•°æ˜¯å¦éƒ½å¤§äºç­‰äº `k`ï¼Œè®°å½•è‡³å°‘åŒ…å« `k` ä¸ªé‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²çš„é•¿åº¦ã€‚

``` js
var longestSubstring = function (s, k) {
  const n = s.length;
  let res = 0;

  for (let i = 0; i < n; i++) {
    const map = new Map();
    for (let j = i; j < n; j++) {
      map.set(s[j], (map.get(s[j]) ?? 0) + 1);

      if (isValid(map, k)) {
        res = Math.max(res, j - i + 1);
      }
    }
  }

  return res;
};

const isValid = (map, k) => {
  for (const count of map.values()) {
    if (count < k) return false;
  }
  return true;
};
```

æ—¶é—´å¤æ‚åº¦ï¼šO(nÂ²)ï¼Œç©ºé—´å¤æ‚åº¦ï¼šO(|Î£|)ï¼Œ|Î£| ä¸ºå­—ç¬¦é›†çš„å¤§å°ã€‚

#### 2. åˆ†æ²»æ³•

é¦–å…ˆç»Ÿè®¡å­—ç¬¦ä¸²ä¸­æ¯ä¸ªå­—ç¬¦å‡ºç°çš„æ¬¡æ•°ï¼Œç„¶åå°†ç¬¬ä¸€ä¸ªå‡ºç°æ¬¡æ•°å°äº `k` çš„å­—ç¬¦ä½œä¸ºåˆ†éš”ç¬¦ï¼Œå¯¹å­—ç¬¦ä¸²è¿›è¡Œåˆ†å‰²ï¼Œæœ€ååˆ†åˆ«æ±‚è§£å·¦å³å­ä¸²çš„æœ€é•¿å­ä¸²é•¿åº¦ï¼Œå–æœ€å¤§å€¼ä½œä¸ºç»“æœã€‚

``` js
var longestSubstring = function (s, k) {
  const n = s.length;
  if (!n && k > n) return 0;

  const map = new Map();
  for (const c of s) {
    map.set(c, (map.get(c) ?? 0) + 1);
  }

  for (let i = 0; i < n; i++) {
    if (map.get(s[i]) < k) {
      const left = longestSubstring(s.slice(0, i), k);
      const right = longestSubstring(s.slice(i + 1), k);
      return Math.max(left, right);
    }
  }

  return n;
};
```

æ—¶é—´å¤æ‚åº¦ï¼šO(nÂ²)ï¼Œç©ºé—´å¤æ‚åº¦ï¼šO(n)ã€‚

#### 3. æ»‘åŠ¨çª—å£ + å“ˆå¸Œè¡¨ ğŸ‘

ç»´æŠ¤ä¸€ä¸ªå¯å˜å¤§å°çš„æ»‘åŠ¨çª—å£ï¼Œä½¿ç”¨ä¸¤ä¸ªå˜é‡ `l` å’Œ `r` åˆ†åˆ«è¡¨ç¤ºæ»‘åŠ¨çª—å£çš„å·¦å³è¾¹ç•Œã€‚ä½¿ç”¨å“ˆå¸Œè¡¨ç»Ÿè®¡çª—å£ä¸­æ¯ä¸ªå­—ç¬¦å‡ºç°çš„æ¬¡æ•°ï¼Œä¿è¯çª—å£ä¸­çš„æ¯ä¸ªå­—ç¬¦è‡³å°‘å‡ºç° `k` æ¬¡ï¼Œä»¥æ±‚å¾—ç¬¦åˆæ¡ä»¶çš„æœ€é•¿å­ä¸²ã€‚

æšä¸¾ä¸åŒæ•°é‡çš„å­—ç¬¦ä½œä¸ºçª—å£çš„ç›®æ ‡ã€‚è®¡ç®—å½“å‰çª—å£å†…æ˜¯å¦æ‰€æœ‰å­—ç¬¦çš„å‡ºç°æ¬¡æ•°éƒ½å¤§äºç­‰äº `k`ã€‚

å®šä¹‰ `uniqueTarget` å˜é‡è¡¨ç¤ºçª—å£å†…å…è®¸ä¸åŒå­—ç¬¦å‡ºç°çš„æœ€å¤§æ•°é‡ã€‚åœ¨å½“å‰çª—å£ä¸­ï¼Œ`uniqueCount` å˜é‡ç”¨äºç»´æŠ¤å­—ç¬¦å‡ºç°çš„æ¬¡æ•°ï¼Œ`countAtLeastK` å˜é‡ç»Ÿè®¡ç¬¦åˆæ¡ä»¶çš„å­—ç¬¦æ•°é‡ã€‚

éå† `s`ï¼Œæ¯æ¬¡å‘å³ç§»åŠ¨å³è¾¹ç•Œæ‰©å¤§çª—å£ï¼Œå°†å½“å‰å­—ç¬¦æ·»åŠ åˆ°çª—å£ä¸­ã€‚å¦‚æœçª—å£å†…ä¸åŒçš„å­—ç¬¦æ•°é‡å¤§äºçª—å£å…è®¸çš„æœ€å¤§ä¸åŒå­—ç¬¦æ•°ï¼Œåˆ™å‘å³ç§»åŠ¨å·¦è¾¹ç•Œæ”¶ç¼©çª—å£ã€‚å¦‚æœçª—å£ä¸­æ‰€æœ‰å­—ç¬¦çš„å‡ºç°çš„æ¬¡æ•°éƒ½æ»¡è¶³æ¡ä»¶åˆ™æ›´æ–°å­ä¸²çš„é•¿åº¦ã€‚

``` js
var longestSubstring = function (s, k) {
  const n = s.length;
  let res = 0;

  for (let uniqueTarget = 1; uniqueTarget <= 26; uniqueTarget++) {
    const map = new Map();
    let l = 0;
    let r = 0;
    let uniqueCount = 0;
    let countAtLeastK = 0;

    while (r < n) {
      // æ‰©å¤§çª—å£
      if (!map.get(s[r])) uniqueCount++;
      map.set(s[r], (map.get(s[r]) ?? 0) + 1);
      if (map.get(s[r]) === k) countAtLeastK++;

      // ä¸æ»¡è¶³è¦æ±‚ï¼Œåˆ™å‘å³ç§»åŠ¨å·¦è¾¹ç•Œæ”¶ç¼©çª—å£
      while (uniqueCount > uniqueTarget) {
        if (map.get(s[l]) === k) countAtLeastK--;
        map.set(s[l], map.get(s[l]) - 1);
        if (map.get(s[l]) === 0) uniqueCount--;
        l++;
      }
	  
      // çª—å£å†…æ‰€æœ‰å­—ç¬¦çš„éƒ½è‡³å°‘é‡å¤ k æ¬¡
      if (uniqueCount === uniqueTarget && uniqueCount === countAtLeastK) {
        res = Math.max(res, r - l + 1);
      }

      r++;
    }
  }

  return res;
};
```

æ—¶é—´å¤æ‚åº¦ï¼šO(n)ï¼Œç©ºé—´å¤æ‚åº¦ï¼šO(|Î£|)ï¼Œ|Î£| ä¸ºå­—ç¬¦é›†çš„å¤§å°ã€‚

### [424. æ›¿æ¢åçš„æœ€é•¿é‡å¤å­—ç¬¦ ğŸŸ¡](https://leetcode.cn/problems/longest-repeating-character-replacement/description/)

é¢˜ç›®è¦æ±‚ï¼šåœ¨ä¸€ä¸ª**ä»…åŒ…å«å¤§å†™å­—æ¯**çš„å­—ç¬¦ä¸² `s` ä¸­ï¼Œé€‰æ‹©ä»»æ„ä¸€ä¸ªå­—ç¬¦æ›¿æ¢ä¸ºå…¶ä»–ä»»æ„å¤§å†™å­—æ¯ï¼Œæœ€å¤šæ‰§è¡Œ `k` æ¬¡æ›¿æ¢æ“ä½œã€‚è¿”å›åŒ…å«ç›¸åŒå­—æ¯çš„æœ€é•¿å­ä¸²çš„é•¿åº¦ã€‚

#### 1. æš´åŠ›æ³•ï¼ˆè¶…æ—¶ï¼‰

æšä¸¾æ‰€æœ‰å¯èƒ½çš„å­ä¸²ï¼Œä½¿ç”¨å“ˆå¸Œè¡¨ç»Ÿè®¡å½“å‰å­ä¸²æ¯ä¸ªå­—ç¬¦å‡ºç°çš„æ¬¡æ•°ï¼Œè®¡ç®—å­ä¸²ä¸­ä»»æ„å­—ç¬¦æ›¿æ¢ `k` æ¬¡ååŒ…å«ç›¸åŒå­—æ¯çš„æœ€é•¿å­ä¸²é•¿åº¦ã€‚

``` js
var characterReplacement = function(s, k) {
  const n = s.length;
  let res = 0;

  for (let i = 0; i < n; i++) {
    for (let j = i; j < n; j++) {
      const substr = s.slice(i, j + 1);
      const substrLen = substr.length;

      const map = new Map();
      for (const c of substr) {
        map.set(c, (map.get(c) ?? 0) + 1);
      }

      const maxCount = Math.max(...map.values());
      // æ›¿æ¢åä¸èƒ½ä½¿å­ä¸²å­—ç¬¦å…¨éƒ¨ç›¸åŒ
      if (substrLen - maxCount > k) break;
      res = Math.max(res, substrLen);
    }
  }

  return res;
};
```

æ—¶é—´å¤æ‚åº¦ï¼šO(nÂ³)ï¼Œç©ºé—´å¤æ‚åº¦ï¼šO(|Î£|)ï¼Œ|Î£| ä¸ºå­—ç¬¦é›†çš„å¤§å°ã€‚

#### 2. æ»‘åŠ¨çª—å£ + æ•°ç»„ ğŸ‘

å®šä¹‰ä¸¤ä¸ªå˜é‡ `l` å’Œ `r` åˆ†åˆ«è¡¨ç¤ºæ»‘åŠ¨çª—å£çš„å·¦å³è¾¹ç•Œï¼Œç”±äºå­—ç¬¦ä¸²ä¸­ä»…åŒ…å«å¤§å†™å­—æ¯ï¼Œæ‰€ä»¥ä½¿ç”¨é•¿åº¦ä¸º `26` çš„æ•°ç»„è®°å½•çª—å£å†…æ¯ä¸ªå­—ç¬¦å‡ºç°çš„æ¬¡æ•°ã€‚

éå† `s`ï¼Œæ¯æ¬¡å‘å³ç§»åŠ¨å³è¾¹ç•Œæ‰©å¤§çª—å£ï¼Œç„¶åæ›´æ–°çª—å£å†…å­—ç¬¦å‡ºç°çš„æ¬¡æ•°å¹¶å°è¯•æ›´æ–°å­—ç¬¦çš„æœ€å¤§å‡ºç°æ¬¡æ•°ï¼Œå¦‚æœå½“å‰çª—å£ä»»æ„å­—ç¬¦æ›¿æ¢ `k` æ¬¡åä¸èƒ½è®©æ‰€æœ‰å­—ç¬¦ç›¸åŒï¼Œåˆ™å‘å³ç§»åŠ¨å·¦æŒ‡é’ˆæ”¶ç¼©çª—å£ï¼Œå¹¶æ›´æ–°çª—å£å†…å­—ç¬¦å‡ºç°çš„æ¬¡æ•°ã€‚æœ€åæ›´æ–°å­å­—ç¬¦ä¸²é•¿åº¦ï¼Œé‡å¤ä»¥ä¸Šæ“ä½œç›´åˆ°éå†å®Œ `s` ä¸ºæ­¢ã€‚

``` js
var characterReplacement = function(s, k) {
  const n = s.length;
  let res = 0;
  let l = 0;
  let r = 0;
  const count = new Array(26).fill(0);
  let maxCount = 0;

  while (r < n) {
    // æ‰©å¤§çª—å£
    const c = s.charCodeAt(r) - 'A'.charCodeAt();
    count[c]++;
    maxCount = Math.max(maxCount, count[c]);

    // çª—å£å†…é™¤å‡ºç°æ¬¡æ•°æœ€å¤šçš„å­—ç¬¦å¤–å…¶å®ƒå­—ç¬¦ä¸èƒ½å®Œå…¨è¢«æ›¿æ¢ï¼Œåˆ™å‘å³ç§»åŠ¨å·¦è¾¹ç•Œæ”¶ç¼©çª—å£
    if (r - l + 1 - maxCount > k) {
      count[s.charCodeAt(l) - 'A'.charCodeAt()]--;
      l++;
    }

    res = Math.max(res, r - l + 1);

    r++;
  }

  return res;
};
```

æ—¶é—´å¤æ‚åº¦ï¼šO(n)ï¼Œç©ºé—´å¤æ‚åº¦ï¼šO(|Î£|)ï¼Œ|Î£| ä¸ºå­—ç¬¦é›†çš„å¤§å°ã€‚

## æ— é‡å¤å­ä¸²

### [3. æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸² ğŸŸ¡ â¤](https://leetcode.cn/problems/longest-substring-without-repeating-characters/description/)

é¢˜ç›®è¦æ±‚ï¼šåœ¨ç»™å®šå­—ç¬¦ä¸² `s` ä¸­æ‰¾å‡ºä¸åŒ…å«é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²çš„é•¿åº¦ã€‚

#### 1. æš´åŠ›æ³•

ä½¿ç”¨åŒå±‚å¾ªç¯æšä¸¾æ‰€æœ‰å­ä¸²ï¼Œä½¿ç”¨ `Set` åˆ¤æ–­å­ä¸²æ˜¯å¦åŒ…å«é‡å¤å­—ç¬¦ï¼Œè®°å½•ä¸åŒ…å«é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²çš„é•¿åº¦ã€‚

``` js
var lengthOfLongestSubstring = function (s) {
  const n = s.length;
  let res = 0;

  for (let i = 0; i < n; i++) {
    const seen = new Set();
    for (let j = i; j < n; j++) {
      if (seen.has(s[j])) break;
      seen.add(s[j]);
      
      res = Math.max(res, j - i + 1);
    }
  }

  return res;
};
```

æ—¶é—´å¤æ‚åº¦ï¼šO(nÂ²)ï¼Œç©ºé—´å¤æ‚åº¦ï¼šO(n)ã€‚

#### 2. æ»‘åŠ¨çª—å£ + Set ğŸ‘

ç»´æŠ¤ä¸€ä¸ªå¯å˜å¤§å°çš„æ»‘åŠ¨çª—å£ã€‚ä½¿ç”¨ä¸¤ä¸ªå˜é‡ `l` å’Œ `r` åˆ†åˆ«è¡¨ç¤ºæ»‘åŠ¨çª—å£çš„å·¦å³è¾¹ç•Œï¼Œçª—å£å†…ä¸èƒ½åŒ…å«é‡å¤çš„å­—ç¬¦ã€‚ä½¿ç”¨ `Set` åˆ¤æ–­å½“å‰çª—å£æ˜¯å¦åŒ…å«é‡å¤å­—ç¬¦ã€‚

éå† `s`ï¼Œæ¯æ¬¡å‘å³ç§»åŠ¨å³è¾¹ç•Œæ‰©å¤§çª—å£ï¼Œå°†å½“å‰å­—ç¬¦æ·»åŠ åˆ°çª—å£ä¸­ï¼Œå¹¶è®¡ç®—æ— é‡å¤å­—ç¬¦å­—ä¸²çš„é•¿åº¦ã€‚å¦‚æœå½“å‰çª—å£å‡ºç°é‡å¤å­—ç¬¦ï¼Œåˆ™å‘å³ç§»åŠ¨å·¦è¾¹ç•Œæ”¶ç¼©çª—å£ã€‚é‡å¤ä»¥ä¸Šè¿‡ç¨‹ç›´åˆ°éå†å®Œå­—ç¬¦ `s` ä¸ºæ­¢ã€‚

```js
var lengthOfLongestSubstring = function (s) {
  const n = s.length;
  let res = 0;
  let l = 0;
  let r = 0;
  const seen = new Set();

  while (r < n) {
    // å½“å‰çª—å£å‡ºç°é‡å¤å­—ç¬¦ï¼Œå‘å³ç§»åŠ¨çª—å£å·¦è¾¹ç•Œæ”¶ç¼©çª—å£
    while (seen.has(s[r])) {
      seen.delete(s[l]);
      l++;
    }
	
    // æ‰©å¤§çª—å£ï¼Œå¹¶è®¡ç®—æ— é‡å¤å­—ç¬¦å­—ä¸²çš„é•¿åº¦
    seen.add(s[r]);
    res = Math.max(res, r - l + 1);
    
    r++;
  }

  return res;
};
```

æ—¶é—´å¤æ‚åº¦ï¼šO(n)ï¼Œç©ºé—´å¤æ‚åº¦ï¼šO(n)ã€‚

#### 3. æ»‘åŠ¨çª—å£ + å“ˆå¸Œè¡¨ ğŸ‘

æˆ‘ä»¬å¯ä»¥å¯¹æ”¶ç¼©çª—å£è¿›è¡Œä¼˜åŒ–ï¼Œä½¿ç”¨å“ˆå¸Œè¡¨è®°å½•å½“å‰å­—ç¬¦æœ€åå‡ºç°çš„ä½ç½®ï¼Œå¦‚æœå‡ºç°é‡å¤å­—ç¬¦ï¼Œæˆ‘ä»¬ç›´æ¥å°†çª—å£å·¦è¾¹ç•Œå‘å³ç§»åŠ¨ `k` ä½è€Œä¸æ˜¯ä¸€ä½ï¼Œä»è€Œé¿å…é‡å¤è®¡ç®—ã€‚

``` js
var lengthOfLongestSubstring = function (s) {
  const n = s.length;
  let res = 0;
  let l = 0;
  let r = 0;
  const map = new Map();

  while (r < n) {
    // å½“å‰çª—å£å‡ºç°é‡å¤å­—ç¬¦ï¼Œå°è¯•æ”¶ç¼©çª—å£
    if (map.has(s[r])) {
      l = Math.max(map.get(s[r]) + 1, l);
    }

    // æ‰©å¤§çª—å£ï¼Œå¹¶è®¡ç®—æ— é‡å¤å­—ç¬¦å­—ä¸²çš„é•¿åº¦
    map.set(s[r], r);
    res = Math.max(res, r - l + 1);

    r++;
  }

  return res;
};
```

æ—¶é—´å¤æ‚åº¦ï¼šO(n)ï¼Œç©ºé—´å¤æ‚åº¦ï¼šO(n)ã€‚


### [1100. é•¿åº¦ä¸º K çš„æ— é‡å¤å­—ç¬¦å­ä¸² ğŸŸ¡ ğŸ”’](https://leetcode.cn/problems/find-k-length-substrings-with-no-repeated-characters/description/)

é¢˜ç›®è¦æ±‚ï¼šåœ¨ä¸€ä¸ª**ä»…åŒ…å«å°å†™è‹±æ–‡å­—æ¯**çš„å­—ç¬¦ä¸² `s` ä¸­ï¼Œæ‰¾å‡ºæ‰€æœ‰é•¿åº¦ä¸º `k` çš„æ— é‡å¤å­—ç¬¦å­ä¸²çš„ä¸ªæ•°ã€‚

#### 1. æš´åŠ›æ³•

éå†éå†æ‰€æœ‰é•¿åº¦ä¸º k çš„å­ä¸²ï¼Œæ£€æŸ¥è¿™äº›å­ä¸²æ˜¯å¦åŒ…å«é‡å¤å­—ç¬¦ï¼Œç»Ÿè®¡æ— é‡å¤å­—ç¬¦çš„å­ä¸²ä¸ªæ•°ã€‚

``` js
var numKLenSubstrNoRepeats = function (s, k) {
  if (k > s.length) return 0;

  let res = 0;

  for (let i = 0; i <= s.length - k; i++) {
    let substr = s.slice(i, i + k);
    if (new Set(substr).size === k) res++;
  }

  return res;
};
```

æ—¶é—´å¤æ‚åº¦ï¼šO(nk)ï¼Œç©ºé—´å¤æ‚åº¦ï¼šO(|Î£|)ï¼Œ|Î£| ä¸ºå­—ç¬¦é›†çš„å¤§å°ã€‚

#### 2. æ»‘åŠ¨çª—å£ + Map ğŸ‘

ç»´æŠ¤ä¸€ä¸ªå›ºå®šå¤§å°çš„æ»‘åŠ¨çª—å£ï¼Œä½¿ç”¨ `Map` è®°å½•å½“å‰çª—å£ä¸­æ¯ä¸ªå­—ç¬¦å‡ºç°çš„æ¬¡æ•°ã€‚æ¯æ¬¡å‘å³æ»‘åŠ¨ä¸€ä½çª—å£ï¼Œå¦‚æœçª—å£çš„å¤§å°ä¸ `k` ç›¸åŒï¼Œåˆ™è¯´æ˜è¯¥å­ä¸²æ˜¯æ— é‡å¤å­—ç¬¦å­ä¸²ï¼Œå°†å…¶è®°å½•åœ¨ç»“æœä¸­ï¼Œç»§ç»­å¯»æ‰¾å…¶å®ƒæ— é‡å¤å­—ç¬¦å­ä¸²ï¼Œç›´åˆ°çª—å£æ»‘åŠ¨åˆ° `s` å³ä¾§ä¸ºæ­¢ã€‚

``` js
var numKLenSubstrNoRepeats = function (s, k) {
  if (k > s.length) return 0;

  const n = s.length;
  let res = 0;
  const map = new Map();
  
  for (let i = 0; i < k; i++) {
    map.set(s[i], (map.get(s[i]) ?? 0) + 1);
  }
  if (map.size === k) res++;

  for (let i = k; i < n; i++) {
    // ç§»åŠ¨çª—å£å³è¾¹ç•Œ
    map.set(s[i], (map.get(s[i]) ?? 0) + 1);

    // ç§»åŠ¨çª—å£å·¦è¾¹ç•Œ
    map.set(s[i - k], map.get(s[i - k]) - 1);
    if (map.get(s[i - k]) === 0) map.delete(s[i - k]);
    
    if (map.size === k) res++;
  }

  return res;
};
```

æ—¶é—´å¤æ‚åº¦ï¼šO(n)ï¼Œç©ºé—´å¤æ‚åº¦ï¼šO(|Î£|)ï¼Œ|Î£| ä¸ºå­—ç¬¦é›†çš„å¤§å°ã€‚

#### 3. æ»‘åŠ¨çª—å£ + Set ğŸ‘

ç»´æŠ¤ä¸€ä¸ªå¯å˜å¤§å°çš„æ»‘åŠ¨çª—å£ï¼Œä½¿ç”¨ä¸¤ä¸ªå˜é‡ `l` å’Œ `r` åˆ†åˆ«è¡¨ç¤ºæ»‘åŠ¨çª—å£çš„å·¦å³è¾¹ç•Œã€‚ä½¿ç”¨ `Set` æ¥æ£€æŸ¥çª—å£å†…çš„å­—ç¬¦æ˜¯å¦é‡å¤ã€‚

éå† `s`ï¼Œæ¯æ¬¡å‘å³ç§»åŠ¨å³è¾¹ç•Œæ‰©å¤§çª—å£ï¼Œå°†å½“å‰å­—ç¬¦æ·»åŠ åˆ°çª—å£ä¸­ã€‚å¦‚æœå‡ºç°é‡å¤å­—ç¬¦ï¼Œåˆ™å‘å³ç§»åŠ¨å·¦è¾¹ç•Œæ”¶ç¼©çª—å£ï¼Œç›´åˆ°çª—å£å†…æ²¡æœ‰é‡å¤å­—ç¬¦ã€‚å¦‚æœå½“å‰çª—å£æœ‰ `k` ä¸ªä¸åŒçš„å­—ç¬¦ï¼Œåˆ™è®°å½•ç»“æœå¹¶å‘å³ç§»åŠ¨å·¦è¾¹ç•Œæ”¶ç¼©çª—å£ã€‚

``` js
var numKLenSubstrNoRepeats = function (s, k) {
  if (k > s.length) return 0;

  let res = 0;
  let l = 0;
  let r = 0;
  const seen = new Set();

  while (r < s.length) {
    // æ»¡è¶³æ¡ä»¶ï¼Œå°è¯•ç¼©å°çª—å£
    while (seen.has(s[r])) {
      seen.delete(s[l]);
      l++;
    }

    // æ‰©å¤§çª—å£
    seen.add(s[r]);

    // æ»¡è¶³æ¡ä»¶ï¼Œå°è¯•ç¼©å°çª—å£
    if (r - l + 1 === k) {
      res++;
      seen.delete(s[l]);
      l++;
    };

    r++;
  }

  return res;
};
```

æ—¶é—´å¤æ‚åº¦ï¼šO(n)ï¼Œç©ºé—´å¤æ‚åº¦ï¼šO(|Î£|)ï¼Œ|Î£| ä¸ºå­—ç¬¦é›†çš„å¤§å°ã€‚